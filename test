-- â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
-- â•‘  NEXA V2 - ADVANCED ANTI-CHEAT BYPASS                                      â•‘
-- â•‘  Multiple bypass methods for different anti-cheat systems                  â•‘
-- â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

-- Services
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")

-- Player
local player = Players.LocalPlayer

-- State variables
local basePosition = nil
local isNoclipEnabled = false
local isFlyEnabled = false
local connections = {}
local flySpeed = 50

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- UTILITY FUNCTIONS
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

local function getCharacter()
    return player.Character
end

local function getHRP()
    local char = getCharacter()
    return char and char:FindFirstChild("HumanoidRootPart")
end

local function getHumanoid()
    local char = getCharacter()
    return char and char:FindFirstChildOfClass("Humanoid")
end

local function disconnectAll()
    for name, conn in pairs(connections) do
        if conn then
            pcall(function() conn:Disconnect() end)
        end
    end
    connections = {}
end

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- TELEPORT METHODS (Multiple options - use what works for your game)
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

-- METHOD 1: MICRO-TELEPORT (Best for strict anti-cheats)
-- Moves in tiny steps that stay under detection threshold
local function microTeleport(targetPos, statusLabel, speedMultiplier)
    local hrp = getHRP()
    if not hrp then return end
    
    speedMultiplier = speedMultiplier or 1
    local stepSize = 15 * speedMultiplier -- studs per step (most AC allow ~16-20)
    local stepDelay = 0.05 / speedMultiplier -- seconds between steps
    
    local startPos = hrp.Position
    local direction = (targetPos - startPos)
    local distance = direction.Magnitude
    
    if distance < 1 then return end
    
    local steps = math.ceil(distance / stepSize)
    local stepVector = direction.Unit * stepSize
    
    if statusLabel then
        statusLabel.Text = "ğŸš¶ Micro-TP: " .. steps .. " steps..."
        statusLabel.TextColor3 = Color3.fromRGB(255, 200, 100)
    end
    
    spawn(function()
        for i = 1, steps do
            local currentHRP = getHRP()
            if not currentHRP then break end
            
            local currentPos = currentHRP.Position
            local remaining = targetPos - currentPos
            
            if remaining.Magnitude < stepSize then
                -- Final step
                currentHRP.CFrame = CFrame.new(targetPos)
                break
            else
                -- Move one step
                currentHRP.CFrame = currentHRP.CFrame + stepVector
            end
            
            -- Small random variation to look more natural
            wait(stepDelay + (math.random() * 0.02))
        end
        
        if statusLabel then
            statusLabel.Text = "âœ… Arrived!"
            statusLabel.TextColor3 = Color3.fromRGB(0, 255, 136)
        end
    end)
end

-- METHOD 2: CFRAME VELOCITY (Simulates walking)
-- Uses MoveDirection to look like normal movement
local function cframeVelocityTP(targetPos, statusLabel, speed)
    local hrp = getHRP()
    local humanoid = getHumanoid()
    if not hrp or not humanoid then return end
    
    speed = speed or 2 -- multiplier over normal walkspeed
    
    if statusLabel then
        statusLabel.Text = "ğŸƒ CFrame Moving..."
        statusLabel.TextColor3 = Color3.fromRGB(100, 200, 255)
    end
    
    -- Stop any existing velocity TP
    if connections.velocityTP then
        connections.velocityTP:Disconnect()
        connections.velocityTP = nil
    end
    
    local targetReached = false
    
    connections.velocityTP = RunService.RenderStepped:Connect(function(dt)
        local currentHRP = getHRP()
        if not currentHRP or targetReached then 
            if connections.velocityTP then
                connections.velocityTP:Disconnect()
                connections.velocityTP = nil
            end
            return 
        end
        
        local direction = (targetPos - currentHRP.Position)
        local distance = direction.Magnitude
        
        if distance < 3 then
            targetReached = true
            if statusLabel then
                statusLabel.Text = "âœ… Arrived!"
                statusLabel.TextColor3 = Color3.fromRGB(0, 255, 136)
            end
            return
        end
        
        -- Move using CFrame (bypasses walkspeed checks)
        local moveAmount = math.min(16 * speed * dt, distance)
        currentHRP.CFrame = currentHRP.CFrame + (direction.Unit * moveAmount)
    end)
end

-- METHOD 3: TWEEN TELEPORT (Smooth movement)
-- Good for games that check instant position changes
local function tweenTeleport(targetPos, statusLabel, duration)
    local hrp = getHRP()
    if not hrp then return end
    
    local distance = (hrp.Position - targetPos).Magnitude
    duration = duration or math.clamp(distance / 50, 2, 15) -- auto-calculate time
    
    if statusLabel then
        statusLabel.Text = "ğŸŒ€ Tweening... " .. math.floor(duration) .. "s"
        statusLabel.TextColor3 = Color3.fromRGB(200, 100, 255)
    end
    
    local tweenInfo = TweenInfo.new(duration, Enum.EasingStyle.Linear)
    local tween = TweenService:Create(hrp, tweenInfo, {CFrame = CFrame.new(targetPos)})
    
    tween:Play()
    tween.Completed:Connect(function()
        if statusLabel then
            statusLabel.Text = "âœ… Arrived!"
            statusLabel.TextColor3 = Color3.fromRGB(0, 255, 136)
        end
    end)
end

-- METHOD 4: FREEFALL TP (Pretend you're falling)
-- Sets falling state then teleports - bypasses movement checks
local function freefallTeleport(targetPos, statusLabel)
    local hrp = getHRP()
    local humanoid = getHumanoid()
    if not hrp or not humanoid then return end
    
    if statusLabel then
        statusLabel.Text = "â¬‡ï¸ Freefall TP..."
        statusLabel.TextColor3 = Color3.fromRGB(255, 150, 50)
    end
    
    -- Set freefall state
    humanoid:ChangeState(Enum.HumanoidStateType.Freefall)
    
    -- Teleport in freefall
    wait(0.1)
    hrp.CFrame = CFrame.new(targetPos)
    
    -- Land
    wait(0.2)
    humanoid:ChangeState(Enum.HumanoidStateType.Landed)
    
    if statusLabel then
        statusLabel.Text = "âœ… Landed!"
        statusLabel.TextColor3 = Color3.fromRGB(0, 255, 136)
    end
end

-- METHOD 5: LERP TELEPORT (Manual interpolation)
-- Smoothest movement, hardest to detect
local function lerpTeleport(targetPos, statusLabel, duration)
    local hrp = getHRP()
    if not hrp then return end
    
    duration = duration or 5
    local startPos = hrp.CFrame
    local endPos = CFrame.new(targetPos)
    local elapsed = 0
    
    if statusLabel then
        statusLabel.Text = "ğŸ“ Lerp TP..."
        statusLabel.TextColor3 = Color3.fromRGB(150, 255, 150)
    end
    
    if connections.lerpTP then
        connections.lerpTP:Disconnect()
    end
    
    connections.lerpTP = RunService.RenderStepped:Connect(function(dt)
        elapsed = elapsed + dt
        local alpha = math.min(elapsed / duration, 1)
        
        local currentHRP = getHRP()
        if currentHRP then
            currentHRP.CFrame = startPos:Lerp(endPos, alpha)
        end
        
        if alpha >= 1 then
            connections.lerpTP:Disconnect()
            connections.lerpTP = nil
            if statusLabel then
                statusLabel.Text = "âœ… Arrived!"
                statusLabel.TextColor3 = Color3.fromRGB(0, 255, 136)
            end
        end
    end)
end

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- NOCLIP (Multiple Methods)
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

-- Best noclip - uses humanoid state
local function setNoclip(enabled, statusLabel)
    if connections.noclip then
        connections.noclip:Disconnect()
        connections.noclip = nil
    end
    
    if enabled then
        connections.noclip = RunService.Stepped:Connect(function()
            pcall(function()
                local humanoid = getHumanoid()
                if humanoid then
                    humanoid:ChangeState(11) -- StrafingNoPhysics
                end
            end)
        end)
        if statusLabel then
            statusLabel.Text = "ğŸ‘» Noclip ON"
            statusLabel.TextColor3 = Color3.fromRGB(255, 200, 0)
        end
    else
        pcall(function()
            local humanoid = getHumanoid()
            if humanoid then
                humanoid:ChangeState(Enum.HumanoidStateType.Running)
            end
        end)
        if statusLabel then
            statusLabel.Text = "ğŸŸ¢ Ready"
            statusLabel.TextColor3 = Color3.fromRGB(0, 255, 136)
        end
    end
end

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- FLY MODE
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

local flyBV, flyBG

local function setFly(enabled, statusLabel)
    local hrp = getHRP()
    local humanoid = getHumanoid()
    
    if not hrp or not humanoid then return end
    
    if connections.fly then
        connections.fly:Disconnect()
        connections.fly = nil
    end
    
    if flyBV then flyBV:Destroy() flyBV = nil end
    if flyBG then flyBG:Destroy() flyBG = nil end
    
    if enabled then
        humanoid.PlatformStand = true
        
        flyBG = Instance.new("BodyGyro")
        flyBG.P = 9e4
        flyBG.MaxTorque = Vector3.new(9e9, 9e9, 9e9)
        flyBG.CFrame = hrp.CFrame
        flyBG.Parent = hrp
        
        flyBV = Instance.new("BodyVelocity")
        flyBV.Velocity = Vector3.new(0, 0, 0)
        flyBV.MaxForce = Vector3.new(9e9, 9e9, 9e9)
        flyBV.Parent = hrp
        
        connections.fly = RunService.RenderStepped:Connect(function()
            if not flyBV or not flyBG then return end
            
            local camera = workspace.CurrentCamera
            local moveDir = Vector3.new(0, 0, 0)
            
            if UserInputService:IsKeyDown(Enum.KeyCode.W) then
                moveDir = moveDir + camera.CFrame.LookVector
            end
            if UserInputService:IsKeyDown(Enum.KeyCode.S) then
                moveDir = moveDir - camera.CFrame.LookVector
            end
            if UserInputService:IsKeyDown(Enum.KeyCode.A) then
                moveDir = moveDir - camera.CFrame.RightVector
            end
            if UserInputService:IsKeyDown(Enum.KeyCode.D) then
                moveDir = moveDir + camera.CFrame.RightVector
            end
            if UserInputService:IsKeyDown(Enum.KeyCode.Space) then
                moveDir = moveDir + Vector3.new(0, 1, 0)
            end
            if UserInputService:IsKeyDown(Enum.KeyCode.LeftShift) or UserInputService:IsKeyDown(Enum.KeyCode.LeftControl) then
                moveDir = moveDir - Vector3.new(0, 1, 0)
            end
            
            flyBV.Velocity = moveDir.Magnitude > 0 and moveDir.Unit * flySpeed or Vector3.new(0, 0, 0)
            flyBG.CFrame = camera.CFrame
        end)
        
        if statusLabel then
            statusLabel.Text = "ğŸš€ Flying - WASD+Space/Shift"
            statusLabel.TextColor3 = Color3.fromRGB(100, 200, 255)
        end
    else
        humanoid.PlatformStand = false
        if statusLabel then
            statusLabel.Text = "ğŸŸ¢ Ready"
            statusLabel.TextColor3 = Color3.fromRGB(0, 255, 136)
        end
    end
end

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- GUI
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

local function createGUI()
    local playerGui = player:WaitForChild("PlayerGui")
    
    if playerGui:FindFirstChild("NexaV2") then
        playerGui:FindFirstChild("NexaV2"):Destroy()
    end
    
    local gui = Instance.new("ScreenGui")
    gui.Name = "NexaV2"
    gui.ResetOnSpawn = false
    gui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
    gui.Parent = playerGui
    
    -- Main frame
    local main = Instance.new("Frame")
    main.Name = "Main"
    main.Size = UDim2.new(0, 260, 0, 520)
    main.Position = UDim2.new(0.5, -130, 0.5, -260)
    main.BackgroundColor3 = Color3.fromRGB(20, 20, 25)
    main.BorderSizePixel = 0
    main.Parent = gui
    
    local mainCorner = Instance.new("UICorner")
    mainCorner.CornerRadius = UDim.new(0, 12)
    mainCorner.Parent = main
    
    local mainStroke = Instance.new("UIStroke")
    mainStroke.Color = Color3.fromRGB(0, 255, 136)
    mainStroke.Thickness = 2
    mainStroke.Parent = main
    
    -- Title
    local title = Instance.new("TextLabel")
    title.Size = UDim2.new(1, 0, 0, 45)
    title.BackgroundColor3 = Color3.fromRGB(0, 255, 136)
    title.Text = "âš¡ NEXA V2"
    title.Font = Enum.Font.GothamBlack
    title.TextSize = 20
    title.TextColor3 = Color3.fromRGB(15, 15, 20)
    title.Parent = main
    
    local titleCorner = Instance.new("UICorner")
    titleCorner.CornerRadius = UDim.new(0, 12)
    titleCorner.Parent = title
    
    local titleFix = Instance.new("Frame")
    titleFix.Size = UDim2.new(1, 0, 0, 15)
    titleFix.Position = UDim2.new(0, 0, 1, -15)
    titleFix.BackgroundColor3 = Color3.fromRGB(0, 255, 136)
    titleFix.BorderSizePixel = 0
    titleFix.Parent = title
    
    -- Status
    local status = Instance.new("TextLabel")
    status.Name = "Status"
    status.Size = UDim2.new(1, -20, 0, 20)
    status.Position = UDim2.new(0, 10, 0, 52)
    status.BackgroundTransparency = 1
    status.Text = "ğŸŸ¢ Ready - Select a TP method"
    status.Font = Enum.Font.Gotham
    status.TextSize = 11
    status.TextColor3 = Color3.fromRGB(0, 255, 136)
    status.TextXAlignment = Enum.TextXAlignment.Left
    status.Parent = main
    
    -- Helper function
    local function createBtn(name, text, yPos, color)
        local btn = Instance.new("TextButton")
        btn.Name = name
        btn.Size = UDim2.new(0, 235, 0, 35)
        btn.Position = UDim2.new(0, 12, 0, yPos)
        btn.BackgroundColor3 = color or Color3.fromRGB(40, 40, 50)
        btn.Text = text
        btn.Font = Enum.Font.GothamBold
        btn.TextSize = 12
        btn.TextColor3 = Color3.fromRGB(255, 255, 255)
        btn.Parent = main
        
        local corner = Instance.new("UICorner")
        corner.CornerRadius = UDim.new(0, 8)
        corner.Parent = btn
        
        return btn
    end
    
    local function createSection(text, yPos)
        local label = Instance.new("TextLabel")
        label.Size = UDim2.new(1, -20, 0, 20)
        label.Position = UDim2.new(0, 10, 0, yPos)
        label.BackgroundTransparency = 1
        label.Text = text
        label.Font = Enum.Font.GothamBold
        label.TextSize = 11
        label.TextColor3 = Color3.fromRGB(150, 150, 160)
        label.TextXAlignment = Enum.TextXAlignment.Left
        label.Parent = main
        return label
    end
    
    -- Sections and buttons
    createSection("â”â”â” MOVEMENT â”â”â”", 75)
    local noclipBtn = createBtn("Noclip", "ğŸ‘» Noclip: OFF", 95)
    local flyBtn = createBtn("Fly", "ğŸš€ Fly: OFF", 135)
    
    createSection("â”â”â” POSITION â”â”â”", 180)
    local saveBtn = createBtn("Save", "ğŸ’¾ Save Current Position", 200, Color3.fromRGB(255, 140, 0))
    
    local posDisplay = Instance.new("TextLabel")
    posDisplay.Name = "PosDisplay"
    posDisplay.Size = UDim2.new(1, -20, 0, 18)
    posDisplay.Position = UDim2.new(0, 10, 0, 238)
    posDisplay.BackgroundTransparency = 1
    posDisplay.Text = "No position saved"
    posDisplay.Font = Enum.Font.Gotham
    posDisplay.TextSize = 10
    posDisplay.TextColor3 = Color3.fromRGB(100, 100, 110)
    posDisplay.Parent = main
    
    createSection("â”â”â” TELEPORT METHODS â”â”â”", 260)
    local microBtn = createBtn("Micro", "ğŸš¶ Micro-TP (Safest)", 280, Color3.fromRGB(0, 150, 100))
    local cframeBtn = createBtn("CFrame", "ğŸƒ CFrame Velocity", 318, Color3.fromRGB(0, 130, 180))
    local lerpBtn = createBtn("Lerp", "ğŸ“ Lerp TP (Smooth)", 356, Color3.fromRGB(100, 100, 200))
    local tweenBtn = createBtn("Tween", "ğŸŒ€ Tween TP", 394, Color3.fromRGB(150, 80, 200))
    local freefallBtn = createBtn("Freefall", "â¬‡ï¸ Freefall TP", 432, Color3.fromRGB(200, 100, 50))
    local instantBtn = createBtn("Instant", "âš¡ Instant (Risky!)", 470, Color3.fromRGB(180, 50, 50))
    
    -- Speed label
    local speedLabel = Instance.new("TextLabel")
    speedLabel.Size = UDim2.new(1, -20, 0, 15)
    speedLabel.Position = UDim2.new(0, 10, 0, 502)
    speedLabel.BackgroundTransparency = 1
    speedLabel.Text = "Fly: " .. flySpeed .. " | Q/E adjust | Drag title to move"
    speedLabel.Font = Enum.Font.Gotham
    speedLabel.TextSize = 9
    speedLabel.TextColor3 = Color3.fromRGB(80, 80, 90)
    speedLabel.Parent = main
    
    -- Make draggable
    local dragging = false
    local dragInput, mousePos, framePos
    
    title.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
            dragging = true
            mousePos = input.Position
            framePos = main.Position
            input.Changed:Connect(function()
                if input.UserInputState == Enum.UserInputState.End then
                    dragging = false
                end
            end)
        end
    end)
    
    title.InputChanged:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
            dragInput = input
        end
    end)
    
    UserInputService.InputChanged:Connect(function(input)
        if input == dragInput and dragging then
            local delta = input.Position - mousePos
            main.Position = UDim2.new(framePos.X.Scale, framePos.X.Offset + delta.X, framePos.Y.Scale, framePos.Y.Offset + delta.Y)
        end
    end)
    
    return {
        status = status,
        noclipBtn = noclipBtn,
        flyBtn = flyBtn,
        saveBtn = saveBtn,
        posDisplay = posDisplay,
        microBtn = microBtn,
        cframeBtn = cframeBtn,
        lerpBtn = lerpBtn,
        tweenBtn = tweenBtn,
        freefallBtn = freefallBtn,
        instantBtn = instantBtn,
        speedLabel = speedLabel
    }
end

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- MAIN
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

print("â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•")
print("âš¡ NEXA V2 - Advanced Anti-Cheat Bypass")
print("â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•")

local ui = createGUI()

-- Speed adjustment
UserInputService.InputBegan:Connect(function(input, gpe)
    if gpe then return end
    if input.KeyCode == Enum.KeyCode.Q then
        flySpeed = math.max(10, flySpeed - 10)
        ui.speedLabel.Text = "Fly: " .. flySpeed .. " | Q/E adjust | Drag title to move"
    elseif input.KeyCode == Enum.KeyCode.E then
        flySpeed = math.min(200, flySpeed + 10)
        ui.speedLabel.Text = "Fly: " .. flySpeed .. " | Q/E adjust | Drag title to move"
    end
end)

-- Noclip
ui.noclipBtn.MouseButton1Click:Connect(function()
    isNoclipEnabled = not isNoclipEnabled
    ui.noclipBtn.Text = isNoclipEnabled and "ğŸ‘» Noclip: ON" or "ğŸ‘» Noclip: OFF"
    ui.noclipBtn.BackgroundColor3 = isNoclipEnabled and Color3.fromRGB(0, 200, 100) or Color3.fromRGB(40, 40, 50)
    setNoclip(isNoclipEnabled, ui.status)
end)

-- Fly
ui.flyBtn.MouseButton1Click:Connect(function()
    isFlyEnabled = not isFlyEnabled
    ui.flyBtn.Text = isFlyEnabled and "ğŸš€ Fly: ON" or "ğŸš€ Fly: OFF"
    ui.flyBtn.BackgroundColor3 = isFlyEnabled and Color3.fromRGB(0, 200, 100) or Color3.fromRGB(40, 40, 50)
    setFly(isFlyEnabled, ui.status)
end)

-- Save position
ui.saveBtn.MouseButton1Click:Connect(function()
    local hrp = getHRP()
    if hrp then
        basePosition = hrp.Position
        local x, y, z = math.floor(basePosition.X), math.floor(basePosition.Y), math.floor(basePosition.Z)
        ui.posDisplay.Text = string.format("ğŸ“ Saved: %d, %d, %d", x, y, z)
        ui.posDisplay.TextColor3 = Color3.fromRGB(0, 255, 136)
        ui.saveBtn.BackgroundColor3 = Color3.fromRGB(0, 255, 136)
        wait(0.2)
        ui.saveBtn.BackgroundColor3 = Color3.fromRGB(255, 140, 0)
        print("âœ“ Position saved:", basePosition)
    end
end)

-- TP Methods
ui.microBtn.MouseButton1Click:Connect(function()
    if basePosition then microTeleport(basePosition, ui.status, 1)
    else ui.status.Text = "âŒ Save a position first!" ui.status.TextColor3 = Color3.fromRGB(255, 100, 100) end
end)

ui.cframeBtn.MouseButton1Click:Connect(function()
    if basePosition then cframeVelocityTP(basePosition, ui.status, 3)
    else ui.status.Text = "âŒ Save a position first!" ui.status.TextColor3 = Color3.fromRGB(255, 100, 100) end
end)

ui.lerpBtn.MouseButton1Click:Connect(function()
    if basePosition then lerpTeleport(basePosition, ui.status, 5)
    else ui.status.Text = "âŒ Save a position first!" ui.status.TextColor3 = Color3.fromRGB(255, 100, 100) end
end)

ui.tweenBtn.MouseButton1Click:Connect(function()
    if basePosition then tweenTeleport(basePosition, ui.status)
    else ui.status.Text = "âŒ Save a position first!" ui.status.TextColor3 = Color3.fromRGB(255, 100, 100) end
end)

ui.freefallBtn.MouseButton1Click:Connect(function()
    if basePosition then freefallTeleport(basePosition, ui.status)
    else ui.status.Text = "âŒ Save a position first!" ui.status.TextColor3 = Color3.fromRGB(255, 100, 100) end
end)

ui.instantBtn.MouseButton1Click:Connect(function()
    if basePosition then
        local hrp = getHRP()
        if hrp then
            hrp.CFrame = CFrame.new(basePosition)
            ui.status.Text = "âš¡ Instant TP (may lag back)"
            ui.status.TextColor3 = Color3.fromRGB(255, 100, 100)
        end
    else 
        ui.status.Text = "âŒ Save a position first!" 
        ui.status.TextColor3 = Color3.fromRGB(255, 100, 100) 
    end
end)

-- Respawn handling
player.CharacterAdded:Connect(function()
    wait(1)
    if isNoclipEnabled then
        setNoclip(false, nil)
        wait(0.1)
        setNoclip(true, ui.status)
    end
    if isFlyEnabled then
        setFly(false, nil)
        wait(0.1)
        setFly(true, ui.status)
    end
end)

print("â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•")
print("âœ… NEXA V2 Loaded!")
print("")
print("ğŸ“‹ TP METHODS (try each to find what works):")
print("  ğŸš¶ Micro-TP   = Tiny steps, safest, slower")
print("  ğŸƒ CFrame     = Simulates walking fast")
print("  ğŸ“ Lerp       = Smooth interpolation")
print("  ğŸŒ€ Tween      = TweenService movement")
print("  â¬‡ï¸ Freefall   = Pretends you're falling")
print("  âš¡ Instant    = Direct TP (usually detected)")
print("")
print("ğŸ’¡ If one method gets you lagged back, try another!")
print("   Different games use different anti-cheats.")
print("â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•")

