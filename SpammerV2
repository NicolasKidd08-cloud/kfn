-- Nexa Spammer - Steal a Brainrot Admin Tool
-- Place this in StarterGui as a LocalScript

local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")
local LocalPlayer = Players.LocalPlayer

-- Create ScreenGui
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "NexaSpammer"
ScreenGui.ResetOnSpawn = false
ScreenGui.Parent = LocalPlayer:WaitForChild("PlayerGui")

-- Main Frame
local MainFrame = Instance.new("Frame")
MainFrame.Name = "MainFrame"
MainFrame.Size = UDim2.new(0, 350, 0, 400)
MainFrame.Position = UDim2.new(0.5, -175, 0.5, -200)
MainFrame.BackgroundColor3 = Color3.fromRGB(20, 20, 30)
MainFrame.BorderSizePixel = 0
MainFrame.ClipsDescendants = true
MainFrame.Parent = ScreenGui

-- Add UI Corner
local Corner = Instance.new("UICorner")
Corner.CornerRadius = UDim.new(0, 12)
Corner.Parent = MainFrame

-- Add subtle gradient
local Gradient = Instance.new("UIGradient")
Gradient.Color = ColorSequence.new{
	ColorSequenceKeypoint.new(0, Color3.fromRGB(25, 25, 40)),
	ColorSequenceKeypoint.new(1, Color3.fromRGB(15, 15, 25))
}
Gradient.Rotation = 45
Gradient.Parent = MainFrame

-- Title Bar
local TitleBar = Instance.new("Frame")
TitleBar.Name = "TitleBar"
TitleBar.Size = UDim2.new(1, 0, 0, 45)
TitleBar.BackgroundColor3 = Color3.fromRGB(120, 40, 200)
TitleBar.BorderSizePixel = 0
TitleBar.Parent = MainFrame

local TitleCorner = Instance.new("UICorner")
TitleCorner.CornerRadius = UDim.new(0, 12)
TitleCorner.Parent = TitleBar

local TitleGradient = Instance.new("UIGradient")
TitleGradient.Color = ColorSequence.new{
	ColorSequenceKeypoint.new(0, Color3.fromRGB(140, 60, 220)),
	ColorSequenceKeypoint.new(1, Color3.fromRGB(100, 30, 180))
}
TitleGradient.Rotation = 90
TitleGradient.Parent = TitleBar

-- Title Text
local Title = Instance.new("TextLabel")
Title.Name = "Title"
Title.Size = UDim2.new(1, -50, 1, 0)
Title.Position = UDim2.new(0, 15, 0, 0)
Title.BackgroundTransparency = 1
Title.Text = "âš¡ NEXA SPAMMER"
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.TextSize = 20
Title.Font = Enum.Font.GothamBold
Title.TextXAlignment = Enum.TextXAlignment.Left
Title.Parent = TitleBar

-- Close/Minimize Button
local CloseButton = Instance.new("TextButton")
CloseButton.Name = "CloseButton"
CloseButton.Size = UDim2.new(0, 35, 0, 35)
CloseButton.Position = UDim2.new(1, -40, 0, 5)
CloseButton.BackgroundColor3 = Color3.fromRGB(220, 50, 80)
CloseButton.Text = "âˆ’"
CloseButton.TextColor3 = Color3.fromRGB(255, 255, 255)
CloseButton.TextSize = 22
CloseButton.Font = Enum.Font.GothamBold
CloseButton.Parent = TitleBar

local CloseCorner = Instance.new("UICorner")
CloseCorner.CornerRadius = UDim.new(0, 8)
CloseCorner.Parent = CloseButton

-- Content Frame (everything below title bar)
local ContentFrame = Instance.new("Frame")
ContentFrame.Name = "ContentFrame"
ContentFrame.Size = UDim2.new(1, 0, 1, -45)
ContentFrame.Position = UDim2.new(0, 0, 0, 45)
ContentFrame.BackgroundTransparency = 1
ContentFrame.Parent = MainFrame

-- Toggle buttons frame - REMOVED, now using settings menu
-- Toggle states
local espEnabled = true
local jailInverseMode = false
local rocketBalloonMode = false
local cooldownEnabled = false

-- Instructions
local Instructions = Instance.new("TextLabel")
Instructions.Size = UDim2.new(1, -30, 0, 30)
Instructions.Position = UDim2.new(0, 15, 0, 5)
Instructions.BackgroundTransparency = 1
Instructions.Text = "Click any player to spam commands!"
Instructions.TextColor3 = Color3.fromRGB(200, 200, 255)
Instructions.TextSize = 12
Instructions.Font = Enum.Font.Gotham
Instructions.TextWrapped = true
Instructions.Parent = ContentFrame

-- Settings Button at bottom
local SettingsButton = Instance.new("TextButton")
SettingsButton.Name = "SettingsButton"
SettingsButton.Size = UDim2.new(1, -30, 0, 35)
SettingsButton.Position = UDim2.new(0, 15, 1, -40)
SettingsButton.BackgroundColor3 = Color3.fromRGB(40, 40, 60)
SettingsButton.BorderSizePixel = 0
SettingsButton.Text = "âš™ï¸ Settings"
SettingsButton.TextColor3 = Color3.fromRGB(255, 255, 255)
SettingsButton.TextSize = 14
SettingsButton.Font = Enum.Font.GothamBold
SettingsButton.Parent = ContentFrame

local SettingsBtnCorner = Instance.new("UICorner")
SettingsBtnCorner.CornerRadius = UDim.new(0, 8)
SettingsBtnCorner.Parent = SettingsButton

-- Settings Menu Frame
local SettingsMenu = Instance.new("Frame")
SettingsMenu.Name = "SettingsMenu"
SettingsMenu.Size = UDim2.new(0, 320, 0, 350)
SettingsMenu.Position = UDim2.new(0.5, -160, 0.5, -175)
SettingsMenu.BackgroundColor3 = Color3.fromRGB(20, 20, 30)
SettingsMenu.BorderSizePixel = 0
SettingsMenu.Visible = false
SettingsMenu.Parent = ScreenGui

local SettingsCorner = Instance.new("UICorner")
SettingsCorner.CornerRadius = UDim.new(0, 12)
SettingsCorner.Parent = SettingsMenu

local SettingsGradient = Instance.new("UIGradient")
SettingsGradient.Color = ColorSequence.new{
	ColorSequenceKeypoint.new(0, Color3.fromRGB(25, 25, 40)),
	ColorSequenceKeypoint.new(1, Color3.fromRGB(15, 15, 25))
}
SettingsGradient.Rotation = 45
SettingsGradient.Parent = SettingsMenu

-- Settings Title Bar
local SettingsTitleBar = Instance.new("Frame")
SettingsTitleBar.Name = "SettingsTitleBar"
SettingsTitleBar.Size = UDim2.new(1, 0, 0, 45)
SettingsTitleBar.BackgroundColor3 = Color3.fromRGB(120, 40, 200)
SettingsTitleBar.BorderSizePixel = 0
SettingsTitleBar.Parent = SettingsMenu

local SettingsTitleCorner = Instance.new("UICorner")
SettingsTitleCorner.CornerRadius = UDim.new(0, 12)
SettingsTitleCorner.Parent = SettingsTitleBar

local SettingsTitleGradient = Instance.new("UIGradient")
SettingsTitleGradient.Color = ColorSequence.new{
	ColorSequenceKeypoint.new(0, Color3.fromRGB(140, 60, 220)),
	ColorSequenceKeypoint.new(1, Color3.fromRGB(100, 30, 180))
}
SettingsTitleGradient.Rotation = 90
SettingsTitleGradient.Parent = SettingsTitleBar

local SettingsTitle = Instance.new("TextLabel")
SettingsTitle.Size = UDim2.new(1, -50, 1, 0)
SettingsTitle.Position = UDim2.new(0, 15, 0, 0)
SettingsTitle.BackgroundTransparency = 1
SettingsTitle.Text = "âš™ï¸ SETTINGS"
SettingsTitle.TextColor3 = Color3.fromRGB(255, 255, 255)
SettingsTitle.TextSize = 20
SettingsTitle.Font = Enum.Font.GothamBold
SettingsTitle.TextXAlignment = Enum.TextXAlignment.Left
SettingsTitle.Parent = SettingsTitleBar

local SettingsCloseButton = Instance.new("TextButton")
SettingsCloseButton.Size = UDim2.new(0, 35, 0, 35)
SettingsCloseButton.Position = UDim2.new(1, -40, 0, 5)
SettingsCloseButton.BackgroundColor3 = Color3.fromRGB(220, 50, 80)
SettingsCloseButton.Text = "Ã—"
SettingsCloseButton.TextColor3 = Color3.fromRGB(255, 255, 255)
SettingsCloseButton.TextSize = 22
SettingsCloseButton.Font = Enum.Font.GothamBold
SettingsCloseButton.Parent = SettingsTitleBar

local SettingsCloseCorner = Instance.new("UICorner")
SettingsCloseCorner.CornerRadius = UDim.new(0, 8)
SettingsCloseCorner.Parent = SettingsCloseButton

-- Settings Content
local SettingsContent = Instance.new("Frame")
SettingsContent.Size = UDim2.new(1, -30, 1, -60)
SettingsContent.Position = UDim2.new(0, 15, 0, 50)
SettingsContent.BackgroundTransparency = 1
SettingsContent.Parent = SettingsMenu

-- Function to create setting toggle
local function createSettingToggle(name, yPos, icon, toggleVar, description)
	local SettingFrame = Instance.new("Frame")
	SettingFrame.Name = name .. "Setting"
	SettingFrame.Size = UDim2.new(1, 0, 0, 65)
	SettingFrame.Position = UDim2.new(0, 0, 0, yPos)
	SettingFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 45)
	SettingFrame.BorderSizePixel = 0
	SettingFrame.Parent = SettingsContent
	
	local FrameCorner = Instance.new("UICorner")
	FrameCorner.CornerRadius = UDim.new(0, 8)
	FrameCorner.Parent = SettingFrame
	
	local IconLabel = Instance.new("TextLabel")
	IconLabel.Size = UDim2.new(0, 40, 0, 40)
	IconLabel.Position = UDim2.new(0, 10, 0, 12)
	IconLabel.BackgroundTransparency = 1
	IconLabel.Text = icon
	IconLabel.TextSize = 24
	IconLabel.Font = Enum.Font.GothamBold
	IconLabel.Parent = SettingFrame
	
	local NameLabel = Instance.new("TextLabel")
	NameLabel.Size = UDim2.new(1, -140, 0, 20)
	NameLabel.Position = UDim2.new(0, 55, 0, 10)
	NameLabel.BackgroundTransparency = 1
	NameLabel.Text = name
	NameLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
	NameLabel.TextSize = 14
	NameLabel.Font = Enum.Font.GothamBold
	NameLabel.TextXAlignment = Enum.TextXAlignment.Left
	NameLabel.Parent = SettingFrame
	
	local DescLabel = Instance.new("TextLabel")
	DescLabel.Size = UDim2.new(1, -140, 0, 30)
	DescLabel.Position = UDim2.new(0, 55, 0, 32)
	DescLabel.BackgroundTransparency = 1
	DescLabel.Text = description
	DescLabel.TextColor3 = Color3.fromRGB(180, 180, 200)
	DescLabel.TextSize = 11
	DescLabel.Font = Enum.Font.Gotham
	DescLabel.TextXAlignment = Enum.TextXAlignment.Left
	DescLabel.TextWrapped = true
	DescLabel.Parent = SettingFrame
	
	local ToggleButton = Instance.new("TextButton")
	ToggleButton.Size = UDim2.new(0, 60, 0, 30)
	ToggleButton.Position = UDim2.new(1, -70, 0.5, -15)
	ToggleButton.BackgroundColor3 = toggleVar and Color3.fromRGB(70, 180, 130) or Color3.fromRGB(180, 70, 70)
	ToggleButton.Text = toggleVar and "ON" or "OFF"
	ToggleButton.TextColor3 = Color3.fromRGB(255, 255, 255)
	ToggleButton.TextSize = 12
	ToggleButton.Font = Enum.Font.GothamBold
	ToggleButton.Parent = SettingFrame
	
	local ToggleCorner = Instance.new("UICorner")
	ToggleCorner.CornerRadius = UDim.new(0, 6)
	ToggleCorner.Parent = ToggleButton
	
	return ToggleButton, IconLabel
end

local ESPButton, ESPIcon = createSettingToggle("ESP", 0, "ðŸ‘ï¸", espEnabled, "Show NEXA tags above users")
local JailButton = createSettingToggle("Jail + Inverse", 75, "ðŸ”’", jailInverseMode, "Faster jail & inverse spam")
local RocketButton = createSettingToggle("Rocket + Balloon", 150, "ðŸš€", rocketBalloonMode, "Faster rocket & balloon spam")
local CooldownButton = createSettingToggle("Cooldowns", 225, "â±ï¸", cooldownEnabled, "Show command cooldown timers")

-- Player List Frame
local PlayerListFrame = Instance.new("ScrollingFrame")
PlayerListFrame.Name = "PlayerListFrame"
PlayerListFrame.Size = UDim2.new(1, -30, 1, -85)
PlayerListFrame.Position = UDim2.new(0, 15, 0, 40)
PlayerListFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 45)
PlayerListFrame.BorderSizePixel = 0
PlayerListFrame.ScrollBarThickness = 8
PlayerListFrame.ScrollBarImageColor3 = Color3.fromRGB(120, 40, 200)
PlayerListFrame.CanvasSize = UDim2.new(0, 0, 0, 0)
PlayerListFrame.Parent = ContentFrame

local ListCorner = Instance.new("UICorner")
ListCorner.CornerRadius = UDim.new(0, 10)
ListCorner.Parent = PlayerListFrame

local UIListLayout = Instance.new("UIListLayout")
UIListLayout.SortOrder = Enum.SortOrder.Name
UIListLayout.Padding = UDim.new(0, 8)
UIListLayout.Parent = PlayerListFrame

local UIPadding = Instance.new("UIPadding")
UIPadding.PaddingTop = UDim.new(0, 8)
UIPadding.PaddingBottom = UDim.new(0, 8)
UIPadding.PaddingLeft = UDim.new(0, 8)
UIPadding.PaddingRight = UDim.new(0, 8)
UIPadding.Parent = PlayerListFrame

-- All commands to spam
local commandsList = {
	";rocket",
	";rocket",
	";rocket",
	";jumpscare",
	";balloon",
	";ragdoll",
	";balloon",
	";tiny",
	";jail",
	";inverse",
	";morph",
	";rocket",
	";jumpscare",
	";ragdoll",
	";balloon"
}

-- Cooldown system
local commandCooldowns = {
	[";rocket"] = 0,
	[";ragdoll"] = 0,
	[";balloon"] = 0,
	[";tiny"] = 0,
	[";jail"] = 0,
	[";inverse"] = 0,
	[";morph"] = 0,
	[";jumpscare"] = 0,
	[";nightvision"] = 0
}

local commandCooldownTimes = {
	[";rocket"] = 1,
	[";ragdoll"] = 0.5,
	[";balloon"] = 0.3,
	[";tiny"] = 0.5,
	[";jail"] = 0.5,
	[";inverse"] = 0.5,
	[";morph"] = 0.5,
	[";jumpscare"] = 0.5,
	[";nightvision"] = 0.5
}

-- Cooldown display (movable, positioned in corner)
local CooldownDisplay = Instance.new("Frame")
CooldownDisplay.Name = "CooldownDisplay"
CooldownDisplay.Size = UDim2.new(0, 320, 0, 280)
CooldownDisplay.Position = UDim2.new(1, -330, 0.5, -140)
CooldownDisplay.BackgroundColor3 = Color3.fromRGB(15, 15, 20)
CooldownDisplay.BorderSizePixel = 0
CooldownDisplay.Visible = false
CooldownDisplay.Parent = ScreenGui

local CDCorner = Instance.new("UICorner")
CDCorner.CornerRadius = UDim.new(0, 10)
CDCorner.Parent = CooldownDisplay

local CDTitle = Instance.new("TextLabel")
CDTitle.Size = UDim2.new(1, -10, 0, 30)
CDTitle.Position = UDim2.new(0, 5, 0, 5)
CDTitle.BackgroundTransparency = 1
CDTitle.Text = "Command Cooldowns"
CDTitle.TextColor3 = Color3.fromRGB(255, 255, 255)
CDTitle.TextSize = 16
CDTitle.Font = Enum.Font.GothamBold
CDTitle.Parent = CooldownDisplay

local CDGrid = Instance.new("Frame")
CDGrid.Size = UDim2.new(1, -20, 1, -45)
CDGrid.Position = UDim2.new(0, 10, 0, 40)
CDGrid.BackgroundTransparency = 1
CDGrid.Parent = CooldownDisplay

local CDGridLayout = Instance.new("UIGridLayout")
CDGridLayout.CellSize = UDim2.new(0, 145, 0, 50)
CDGridLayout.CellPadding = UDim2.new(0, 10, 0, 8)
CDGridLayout.SortOrder = Enum.SortOrder.Name
CDGridLayout.Parent = CDGrid

-- Command icons (emoji style)
local commandIcons = {
	[";rocket"] = "ðŸš€",
	[";ragdoll"] = "ðŸ¤¸",
	[";balloon"] = "ðŸŽˆ",
	[";tiny"] = "ðŸ”¬",
	[";jail"] = "ðŸ”’",
	[";inverse"] = "ðŸ”„",
	[";morph"] = "ðŸ‘¤",
	[";jumpscare"] = "ðŸ‘»",
	[";nightvision"] = "ðŸ‘ï¸"
}

-- Create cooldown labels for each command
local cooldownLabels = {}

for cmd, _ in pairs(commandCooldowns) do
	local cmdName = cmd:gsub(";", "")
	
	local CmdFrame = Instance.new("Frame")
	CmdFrame.Name = cmdName
	CmdFrame.Size = UDim2.new(1, 0, 1, 0)
	CmdFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 40)
	CmdFrame.BorderSizePixel = 0
	CmdFrame.Parent = CDGrid
	
	local CmdCorner = Instance.new("UICorner")
	CmdCorner.CornerRadius = UDim.new(0, 8)
	CmdCorner.Parent = CmdFrame
	
	-- Icon
	local Icon = Instance.new("TextLabel")
	Icon.Size = UDim2.new(0, 35, 0, 35)
	Icon.Position = UDim2.new(0, 8, 0.5, -17.5)
	Icon.BackgroundTransparency = 1
	Icon.Text = commandIcons[cmd] or "âš¡"
	Icon.TextColor3 = Color3.fromRGB(200, 200, 200)
	Icon.TextSize = 24
	Icon.Font = Enum.Font.GothamBold
	Icon.Parent = CmdFrame
	
	-- Command name
	local CmdLabel = Instance.new("TextLabel")
	CmdLabel.Size = UDim2.new(1, -100, 0, 20)
	CmdLabel.Position = UDim2.new(0, 48, 0, 8)
	CmdLabel.BackgroundTransparency = 1
	CmdLabel.Text = cmdName
	CmdLabel.TextColor3 = Color3.fromRGB(220, 220, 220)
	CmdLabel.TextSize = 13
	CmdLabel.Font = Enum.Font.GothamBold
	CmdLabel.TextXAlignment = Enum.TextXAlignment.Left
	CmdLabel.Parent = CmdFrame
	
	-- Timer label
	local TimerLabel = Instance.new("TextLabel")
	TimerLabel.Size = UDim2.new(0, 60, 0, 25)
	TimerLabel.Position = UDim2.new(1, -68, 0.5, -12.5)
	TimerLabel.BackgroundTransparency = 1
	TimerLabel.Text = "Ready"
	TimerLabel.TextColor3 = Color3.fromRGB(100, 255, 100)
	TimerLabel.TextSize = 16
	TimerLabel.Font = Enum.Font.GothamBold
	TimerLabel.TextXAlignment = Enum.TextXAlignment.Right
	TimerLabel.Parent = CmdFrame
	
	cooldownLabels[cmd] = {
		frame = CmdFrame,
		timer = TimerLabel,
		icon = Icon,
		label = CmdLabel
	}
end

-- Function to update cooldown display
local function updateCooldownDisplay()
	for cmd, timeLeft in pairs(commandCooldowns) do
		if timeLeft > 0 then
			local label = cooldownLabels[cmd]
			if label then
				label.timer.Text = string.format("%ds", math.ceil(timeLeft))
				label.timer.TextColor3 = Color3.fromRGB(255, 255, 255)
				label.frame.BackgroundColor3 = Color3.fromRGB(40, 40, 50)
				label.icon.TextColor3 = Color3.fromRGB(150, 150, 150)
			end
		else
			local label = cooldownLabels[cmd]
			if label then
				label.timer.Text = "Ready"
				label.timer.TextColor3 = Color3.fromRGB(100, 255, 100)
				label.frame.BackgroundColor3 = Color3.fromRGB(30, 60, 40)
				label.icon.TextColor3 = Color3.fromRGB(100, 255, 100)
			end
		end
	end
	
	if cooldownEnabled then
		CooldownDisplay.Visible = true
	end
end

-- Cooldown countdown loop
task.spawn(function()
	while true do
		task.wait(0.1)
		for cmd, timeLeft in pairs(commandCooldowns) do
			if timeLeft > 0 then
				commandCooldowns[cmd] = math.max(0, timeLeft - 0.1)
			end
		end
		updateCooldownDisplay()
	end
end)

-- Make cooldown display draggable
local cdDragging = false
local cdDragInput
local cdDragStart
local cdStartPos

CooldownDisplay.InputBegan:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
		cdDragging = true
		cdDragStart = input.Position
		cdStartPos = CooldownDisplay.Position
		
		input.Changed:Connect(function()
			if input.UserInputState == Enum.UserInputState.End then
				cdDragging = false
			end
		end)
	end
end)

CooldownDisplay.InputChanged:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
		cdDragInput = input
	end
end)

UserInputService.InputChanged:Connect(function(input)
	if input == cdDragInput and cdDragging then
		local delta = input.Position - cdDragStart
		CooldownDisplay.Position = UDim2.new(cdStartPos.X.Scale, cdStartPos.X.Offset + delta.X, cdStartPos.Y.Scale, cdStartPos.Y.Offset + delta.Y)
	end
end)

-- User logging system
local registeredUsers = {}

-- Notification system (top right corner)
local notificationQueue = {}
local activeNotification = nil

local function createNotification(message, color)
	local notification = {
		message = message,
		color = color or Color3.fromRGB(140, 60, 220)
	}
	
	table.insert(notificationQueue, notification)
	
	if not activeNotification then
		task.spawn(showNextNotification)
	end
end

function showNextNotification()
	if #notificationQueue == 0 then
		activeNotification = nil
		return
	end
	
	local notification = table.remove(notificationQueue, 1)
	activeNotification = true
	
	local NotifFrame = Instance.new("Frame")
	NotifFrame.Name = "Notification"
	NotifFrame.Size = UDim2.new(0, 280, 0, 60)
	NotifFrame.Position = UDim2.new(1, 300, 0, 10)
	NotifFrame.BackgroundColor3 = Color3.fromRGB(20, 20, 30)
	NotifFrame.BorderSizePixel = 0
	NotifFrame.Parent = ScreenGui
	
	local NotifCorner = Instance.new("UICorner")
	NotifCorner.CornerRadius = UDim.new(0, 10)
	NotifCorner.Parent = NotifFrame
	
	local NotifGradient = Instance.new("UIGradient")
	NotifGradient.Color = ColorSequence.new{
		ColorSequenceKeypoint.new(0, notification.color),
		ColorSequenceKeypoint.new(1, Color3.fromRGB(20, 20, 30))
	}
	NotifGradient.Rotation = 90
	NotifGradient.Parent = NotifFrame
	
	local NotifIcon = Instance.new("TextLabel")
	NotifIcon.Size = UDim2.new(0, 40, 1, 0)
	NotifIcon.Position = UDim2.new(0, 5, 0, 0)
	NotifIcon.BackgroundTransparency = 1
	NotifIcon.Text = "ðŸ‘¤"
	NotifIcon.TextColor3 = Color3.fromRGB(255, 255, 255)
	NotifIcon.TextSize = 28
	NotifIcon.Font = Enum.Font.GothamBold
	NotifIcon.Parent = NotifFrame
	
	local NotifText = Instance.new("TextLabel")
	NotifText.Size = UDim2.new(1, -50, 1, 0)
	NotifText.Position = UDim2.new(0, 45, 0, 0)
	NotifText.BackgroundTransparency = 1
	NotifText.Text = notification.message
	NotifText.TextColor3 = Color3.fromRGB(255, 255, 255)
	NotifText.TextSize = 13
	NotifText.Font = Enum.Font.Gotham
	NotifText.TextWrapped = true
	NotifText.TextXAlignment = Enum.TextXAlignment.Left
	NotifText.Parent = NotifFrame
	
	-- Slide in
	TweenService:Create(NotifFrame, TweenInfo.new(0.5, Enum.EasingStyle.Back, Enum.EasingDirection.Out), {
		Position = UDim2.new(1, -290, 0, 10)
	}):Play()
	
	-- Wait 5 seconds
	task.wait(5)
	
	-- Slide out
	TweenService:Create(NotifFrame, TweenInfo.new(0.4, Enum.EasingStyle.Quad, Enum.EasingDirection.In), {
		Position = UDim2.new(1, 300, 0, 10)
	}):Play()
	
	task.wait(0.5)
	NotifFrame:Destroy()
	
	-- Show next notification
	showNextNotification()
end

-- Log frame (bottom left corner)
local LogFrame = Instance.new("Frame")
LogFrame.Name = "LogFrame"
LogFrame.Size = UDim2.new(0, 300, 0, 200)
LogFrame.Position = UDim2.new(0, 10, 1, -210)
LogFrame.BackgroundColor3 = Color3.fromRGB(20, 20, 30)
LogFrame.BorderSizePixel = 0
LogFrame.Parent = ScreenGui

local LogCorner = Instance.new("UICorner")
LogCorner.CornerRadius = UDim.new(0, 10)
LogCorner.Parent = LogFrame

local LogTitle = Instance.new("TextLabel")
LogTitle.Size = UDim2.new(1, -10, 0, 25)
LogTitle.Position = UDim2.new(0, 5, 0, 5)
LogTitle.BackgroundTransparency = 1
LogTitle.Text = "ðŸ“‹ Script Users Log"
LogTitle.TextColor3 = Color3.fromRGB(255, 255, 255)
LogTitle.TextSize = 14
LogTitle.Font = Enum.Font.GothamBold
LogTitle.Parent = LogFrame

local LogList = Instance.new("ScrollingFrame")
LogList.Size = UDim2.new(1, -10, 1, -35)
LogList.Position = UDim2.new(0, 5, 0, 30)
LogList.BackgroundColor3 = Color3.fromRGB(30, 30, 45)
LogList.BorderSizePixel = 0
LogList.ScrollBarThickness = 4
LogList.ScrollBarImageColor3 = Color3.fromRGB(120, 40, 200)
LogList.CanvasSize = UDim2.new(0, 0, 0, 0)
LogList.Parent = LogFrame

local LogCorner2 = Instance.new("UICorner")
LogCorner2.CornerRadius = UDim.new(0, 8)
LogCorner2.Parent = LogList

local LogLayout = Instance.new("UIListLayout")
LogLayout.SortOrder = Enum.SortOrder.LayoutOrder
LogLayout.Padding = UDim.new(0, 3)
LogLayout.Parent = LogList

local logCount = 0

local function addLog(message, color)
	logCount = logCount + 1
	
	local LogEntry = Instance.new("TextLabel")
	LogEntry.Name = "Log" .. logCount
	LogEntry.Size = UDim2.new(1, -10, 0, 20)
	LogEntry.BackgroundTransparency = 1
	LogEntry.Text = message
	LogEntry.TextColor3 = color or Color3.fromRGB(200, 200, 200)
	LogEntry.TextSize = 11
	LogEntry.Font = Enum.Font.Gotham
	LogEntry.TextXAlignment = Enum.TextXAlignment.Left
	LogEntry.TextWrapped = true
	LogEntry.LayoutOrder = logCount
	LogEntry.Parent = LogList
	
	-- Auto scroll to bottom
	LogList.CanvasSize = UDim2.new(0, 0, 0, LogLayout.AbsoluteContentSize.Y + 5)
	LogList.CanvasPosition = Vector2.new(0, LogList.CanvasSize.Y.Offset)
	
	-- Remove old logs if too many
	if logCount > 50 then
		local oldestLog = LogList:FindFirstChild("Log" .. (logCount - 50))
		if oldestLog then
			oldestLog:Destroy()
		end
	end
end

-- Function to add Nexa tag above player
local function addNexaTag(player)
	if not player.Character then return end
	
	local head = player.Character:FindFirstChild("Head")
	if not head then return end
	
	-- Remove old tag if exists
	local oldTag = head:FindFirstChild("NexaTag")
	if oldTag then oldTag:Destroy() end
	
	-- Create BillboardGui
	local billboard = Instance.new("BillboardGui")
	billboard.Name = "NexaTag"
	billboard.Size = UDim2.new(0, 100, 0, 30)
	billboard.StudsOffset = Vector3.new(0, 2.5, 0)
	billboard.AlwaysOnTop = true
	billboard.Parent = head
	
	-- Background frame
	local frame = Instance.new("Frame")
	frame.Size = UDim2.new(1, 0, 1, 0)
	frame.BackgroundColor3 = Color3.fromRGB(140, 60, 220)
	frame.BorderSizePixel = 0
	frame.Parent = billboard
	
	local frameCorner = Instance.new("UICorner")
	frameCorner.CornerRadius = UDim.new(0, 8)
	frameCorner.Parent = frame
	
	local gradient = Instance.new("UIGradient")
	gradient.Color = ColorSequence.new{
		ColorSequenceKeypoint.new(0, Color3.fromRGB(140, 60, 220)),
		ColorSequenceKeypoint.new(1, Color3.fromRGB(100, 30, 180))
	}
	gradient.Rotation = 45
	gradient.Parent = frame
	
	-- Text
	local textLabel = Instance.new("TextLabel")
	textLabel.Size = UDim2.new(1, 0, 1, 0)
	textLabel.BackgroundTransparency = 1
	textLabel.Text = "âš¡ NEXA"
	textLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
	textLabel.TextSize = 16
	textLabel.Font = Enum.Font.GothamBold
	textLabel.TextStrokeTransparency = 0.5
	textLabel.Parent = frame
end

-- Function to register a user
local function registerUser(player)
	if not registeredUsers[player.UserId] then
		registeredUsers[player.UserId] = {
			name = player.Name,
			displayName = player.DisplayName,
			joinTime = os.time()
		}
		
		-- Log the registration
		addLog("âœ… " .. player.Name .. " executed the script!", Color3.fromRGB(100, 255, 100))
		
		-- Show notification
		createNotification(player.Name .. " logged in!", Color3.fromRGB(100, 255, 100))
		
		-- Also print to console
		print("[Nexa Spammer] New user registered: " .. player.Name)
	end
end

-- Function to check for registered users
local function checkRegisteredUsers()
	for _, player in pairs(Players:GetPlayers()) do
		if player ~= LocalPlayer then
			local hasMarker = player:FindFirstChild("NexaSpammerUser")
			if hasMarker and not registeredUsers[player.UserId] then
				registeredUsers[player.UserId] = {
					name = player.Name,
					displayName = player.DisplayName,
					joinTime = os.time()
				}
				addLog("ðŸ”µ " .. player.Name .. " joined (registered user)", Color3.fromRGB(100, 150, 255))
				createNotification(player.Name .. " joined (Nexa User)", Color3.fromRGB(100, 150, 255))
			end
		end
	end
end

-- Register the local player immediately
registerUser(LocalPlayer)

-- Check when players join
Players.PlayerAdded:Connect(function(player)
	task.wait(2) -- Wait a bit for them to load
	checkRegisteredUsers()
end)

-- Check when players leave
Players.PlayerRemoving:Connect(function(player)
	if registeredUsers[player.UserId] then
		addLog("ðŸ”´ " .. player.Name .. " left the server", Color3.fromRGB(255, 100, 100))
		createNotification(player.Name .. " left the server", Color3.fromRGB(255, 100, 100))
	end
end)

-- Make log frame draggable
local logDragging = false
local logDragInput
local logDragStart
local logStartPos

LogFrame.InputBegan:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
		logDragging = true
		logDragStart = input.Position
		logStartPos = LogFrame.Position
		
		input.Changed:Connect(function()
			if input.UserInputState == Enum.UserInputState.End then
				logDragging = false
			end
		end)
	end
end)

LogFrame.InputChanged:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
		logDragInput = input
	end
end)

UserInputService.InputChanged:Connect(function(input)
	if input == logDragInput and logDragging then
		local delta = input.Position - logDragStart
		LogFrame.Position = UDim2.new(logStartPos.X.Scale, logStartPos.X.Offset + delta.X, logStartPos.Y.Scale, logStartPos.Y.Offset + delta.Y)
	end
end)

-- Make main frame draggable
local dragging = false
local dragInput
local dragStart
local startPos

TitleBar.InputBegan:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
		dragging = true
		dragStart = input.Position
		startPos = MainFrame.Position
		
		input.Changed:Connect(function()
			if input.UserInputState == Enum.UserInputState.End then
				dragging = false
			end
		end)
	end
end)

TitleBar.InputChanged:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
		dragInput = input
	end
end)

UserInputService.InputChanged:Connect(function(input)
	if input == dragInput and dragging then
		local delta = input.Position - dragStart
		MainFrame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
	end
end)

-- Close button functionality
local isMinimized = false
CloseButton.MouseButton1Click:Connect(function()
	isMinimized = not isMinimized
	
	-- Hide/show all frames except the title bar
	ContentFrame.Visible = not isMinimized
	LogFrame.Visible = not isMinimized
	CooldownDisplay.Visible = not isMinimized and cooldownEnabled
	
	CloseButton.Text = isMinimized and "+" or "âˆ’"
	
	-- Animate the main frame size to just show title bar
	TweenService:Create(MainFrame, TweenInfo.new(0.3, Enum.EasingStyle.Quad), {
		Size = isMinimized and UDim2.new(0, 350, 0, 45) or UDim2.new(0, 350, 0, 400)
	}):Play()
end)

-- Settings button click handler
SettingsButton.MouseButton1Click:Connect(function()
	SettingsMenu.Visible = not SettingsMenu.Visible
end)

SettingsCloseButton.MouseButton1Click:Connect(function()
	SettingsMenu.Visible = false
end)

-- Make settings menu draggable
local settingsDragging = false
local settingsDragInput
local settingsDragStart
local settingsStartPos

SettingsTitleBar.InputBegan:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
		settingsDragging = true
		settingsDragStart = input.Position
		settingsStartPos = SettingsMenu.Position
		
		input.Changed:Connect(function()
			if input.UserInputState == Enum.UserInputState.End then
				settingsDragging = false
			end
		end)
	end
end)

SettingsTitleBar.InputChanged:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
		settingsDragInput = input
	end
end)

UserInputService.InputChanged:Connect(function(input)
	if input == settingsDragInput and settingsDragging then
		local delta = input.Position - settingsDragStart
		SettingsMenu.Position = UDim2.new(settingsStartPos.X.Scale, settingsStartPos.X.Offset + delta.X, settingsStartPos.Y.Scale, settingsStartPos.Y.Offset + delta.Y)
	end
end)

-- Function to spam commands on a player
local isSpamming = {}
local function spamPlayer(targetPlayer)
	if isSpamming[targetPlayer.UserId] then
		addLog("âš ï¸ Already spamming " .. targetPlayer.Name, Color3.fromRGB(255, 150, 50))
		return
	end
	
	isSpamming[targetPlayer.UserId] = true
	addLog("âš¡ Spamming " .. targetPlayer.Name .. "!", Color3.fromRGB(100, 255, 100))
	
	task.spawn(function()
		for _, cmd in ipairs(commandsList) do
			-- Check if player still exists
			if not targetPlayer.Parent then
				break
			end
			
			-- Check cooldown if enabled
			if cooldownEnabled then
				if commandCooldowns[cmd] > 0 then
					continue
				end
				commandCooldowns[cmd] = commandCooldownTimes[cmd] or 0.5
			end
			
			-- Execute command in chat
			local chatMessage = cmd .. " " .. targetPlayer.Name
			
			-- Try to send via chat (old chat system)
			pcall(function()
				game:GetService("ReplicatedStorage").DefaultChatSystemChatEvents.SayMessageRequest:FireServer(chatMessage, "All")
			end)
			
			-- Also try via TextChatService (new chat system)
			pcall(function()
				game:GetService("TextChatService").TextChannels.RBXGeneral:SendAsync(chatMessage)
			end)
			
			print("[Nexa] Executing: " .. chatMessage)
			
			-- Adjust wait time based on modes
			local waitTime = 0.1
			if rocketBalloonMode and (cmd == ";rocket" or cmd == ";balloon") then
				waitTime = 0.05
			elseif jailInverseMode and (cmd == ";jail" or cmd == ";inverse") then
				waitTime = 0.05
			end
			
			task.wait(waitTime)
		end
		
		isSpamming[targetPlayer.UserId] = false
		addLog("âœ… Finished spamming " .. targetPlayer.Name, Color3.fromRGB(100, 255, 100))
	end)
end

-- Function to update player list
local function updatePlayerList()
	-- Clear existing buttons
	for _, child in pairs(PlayerListFrame:GetChildren()) do
		if child:IsA("TextButton") then
			child:Destroy()
		end
	end
	
	-- Add player buttons
	for _, player in pairs(Players:GetPlayers()) do
		if player ~= LocalPlayer then
			local PlayerButton = Instance.new("TextButton")
			PlayerButton.Name = player.Name
			PlayerButton.Size = UDim2.new(1, -16, 0, 40)
			PlayerButton.BackgroundColor3 = Color3.fromRGB(40, 40, 60)
			PlayerButton.BorderSizePixel = 0
			PlayerButton.Text = ""
			PlayerButton.Parent = PlayerListFrame
			
			local BtnCorner = Instance.new("UICorner")
			BtnCorner.CornerRadius = UDim.new(0, 8)
			BtnCorner.Parent = PlayerButton
			
			local PlayerName = Instance.new("TextLabel")
			PlayerName.Size = UDim2.new(1, -50, 1, 0)
			PlayerName.Position = UDim2.new(0, 10, 0, 0)
			PlayerName.BackgroundTransparency = 1
			PlayerName.Text = player.Name
			PlayerName.TextColor3 = Color3.fromRGB(255, 255, 255)
			PlayerName.TextSize = 14
			PlayerName.Font = Enum.Font.GothamBold
			PlayerName.TextXAlignment = Enum.TextXAlignment.Left
			PlayerName.Parent = PlayerButton
			
			local SpamIcon = Instance.new("TextLabel")
			SpamIcon.Size = UDim2.new(0, 30, 1, 0)
			SpamIcon.Position = UDim2.new(1, -35, 0, 0)
			SpamIcon.BackgroundTransparency = 1
			SpamIcon.Text = "âš¡"
			SpamIcon.TextColor3 = Color3.fromRGB(140, 60, 220)
			SpamIcon.TextSize = 20
			SpamIcon.Font = Enum.Font.GothamBold
			SpamIcon.Parent = PlayerButton
			
			-- Button click handler
			PlayerButton.MouseButton1Click:Connect(function()
				if not isSpamming[player.UserId] then
					spamPlayer(player)
				end
			end)
			
			-- Hover effect
			PlayerButton.MouseEnter:Connect(function()
				TweenService:Create(PlayerButton, TweenInfo.new(0.2), {
					BackgroundColor3 = Color3.fromRGB(120, 40, 200)
				}):Play()
			end)
			
			PlayerButton.MouseLeave:Connect(function()
				TweenService:Create(PlayerButton, TweenInfo.new(0.2), {
					BackgroundColor3 = Color3.fromRGB(40, 40, 60)
				}):Play()
			end)
		end
	end
	
	-- Update canvas size
	PlayerListFrame.CanvasSize = UDim2.new(0, 0, 0, UIListLayout.AbsoluteContentSize.Y + 16)
end

-- Update player list when players join/leave
Players.PlayerAdded:Connect(updatePlayerList)
Players.PlayerRemoving:Connect(updatePlayerList)

-- Initial player list update
updatePlayerList()

-- Toggle button functionality
ESPButton.MouseButton1Click:Connect(function()
	espEnabled = not espEnabled
	ESPButton.BackgroundColor3 = espEnabled and Color3.fromRGB(70, 180, 130) or Color3.fromRGB(180, 70, 70)
	ESPButton.Text = espEnabled and "ON" or "OFF"
	
	-- Update ESP tags
	for _, player in pairs(Players:GetPlayers()) do
		if espEnabled and registeredUsers[player.UserId] then
			addNexaTag(player)
		elseif not espEnabled and player.Character then
			local head = player.Character:FindFirstChild("Head")
			if head then
				local tag = head:FindFirstChild("NexaTag")
				if tag then tag:Destroy() end
			end
		end
	end
end)

JailButton.MouseButton1Click:Connect(function()
	jailInverseMode = not jailInverseMode
	JailButton.BackgroundColor3 = jailInverseMode and Color3.fromRGB(70, 180, 130) or Color3.fromRGB(180, 70, 70)
	JailButton.Text = jailInverseMode and "ON" or "OFF"
end)

RocketButton.MouseButton1Click:Connect(function()
	rocketBalloonMode = not rocketBalloonMode
	RocketButton.BackgroundColor3 = rocketBalloonMode and Color3.fromRGB(70, 180, 130) or Color3.fromRGB(180, 70, 70)
	RocketButton.Text = rocketBalloonMode and "ON" or "OFF"
end)

CooldownButton.MouseButton1Click:Connect(function()
	cooldownEnabled = not cooldownEnabled
	if not isMinimized then
		CooldownDisplay.Visible = cooldownEnabled
	end
	CooldownButton.BackgroundColor3 = cooldownEnabled and Color3.fromRGB(70, 180, 130) or Color3.fromRGB(180, 70, 70)
	CooldownButton.Text = cooldownEnabled and "ON" or "OFF"
end)

-- Add ESP tags to registered users
if espEnabled then
	for _, player in pairs(Players:GetPlayers()) do
		if registeredUsers[player.UserId] then
			addNexaTag(player)
		end
	end
end

-- Update ESP when characters spawn
Players.PlayerAdded:Connect(function(player)
	player.CharacterAdded:Connect(function()
		if espEnabled and registeredUsers[player.UserId] then
			task.wait(0.5)
			addNexaTag(player)
		end
	end)
end)

print("[Nexa Spammer] Loaded successfully!")
addLog("âœ… Nexa Spammer loaded!", Color3.fromRGB(100, 255, 100))
