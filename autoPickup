local player = game.Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")
local UserInputService = game:GetService("UserInputService")
local VirtualInputManager = game:GetService("VirtualInputManager")

-- Create ScreenGui
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "NexaAutoPickupGui"
screenGui.ResetOnSpawn = false
screenGui.Parent = playerGui

-- Create Main Frame
local frame = Instance.new("Frame")
frame.Size = UDim2.new(0, 280, 0, 100)
frame.Position = UDim2.new(0.5, -140, 0, 30)
frame.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
frame.BorderSizePixel = 0
frame.Active = true
frame.Draggable = true
frame.Parent = screenGui

local frameCorner = Instance.new("UICorner")
frameCorner.CornerRadius = UDim.new(0, 12)
frameCorner.Parent = frame

-- Create Rainbow Outline
local outline = Instance.new("UIStroke")
outline.Thickness = 3
outline.Parent = frame

-- Rainbow animation for outline
local hue = 0
game:GetService("RunService").Heartbeat:Connect(function()
    hue = hue + 0.005
    if hue >= 1 then hue = 0 end
    outline.Color = Color3.fromHSV(hue, 1, 1)
end)

-- Title
local title = Instance.new("TextLabel")
title.Size = UDim2.new(1, 0, 0, 30)
title.Position = UDim2.new(0, 0, 0, 5)
title.BackgroundTransparency = 1
title.Text = "NEXA AUTO PICKUP"
title.TextColor3 = Color3.fromRGB(255, 255, 255)
title.Font = Enum.Font.GothamBold
title.TextSize = 16
title.Parent = frame

-- Create Toggle Button
local button = Instance.new("TextButton")
button.Size = UDim2.new(0, 250, 0, 50)
button.Position = UDim2.new(0.5, -125, 0, 40)
button.BackgroundColor3 = Color3.fromRGB(15, 15, 15)
button.Text = "AUTO PICKUP: OFF"
button.TextColor3 = Color3.fromRGB(0, 100, 0)
button.Font = Enum.Font.GothamBold
button.TextSize = 14
button.BorderSizePixel = 0
button.Parent = frame

local buttonCorner = Instance.new("UICorner")
buttonCorner.CornerRadius = UDim.new(0, 8)
buttonCorner.Parent = button

-- Button stroke
local buttonStroke = Instance.new("UIStroke")
buttonStroke.Thickness = 2
buttonStroke.Color = Color3.fromRGB(0, 80, 0)
buttonStroke.Parent = button

-- State variable
local autoPickupEnabled = false
local isHoldingE = false

-- Toggle function
button.MouseButton1Click:Connect(function()
    autoPickupEnabled = not autoPickupEnabled
   
    if autoPickupEnabled then
        button.TextColor3 = Color3.fromRGB(0, 255, 0)
        button.Text = "AUTO PICKUP: ON"
        buttonStroke.Color = Color3.fromRGB(0, 255, 0)
    else
        button.TextColor3 = Color3.fromRGB(0, 100, 0)
        button.Text = "AUTO PICKUP: OFF"
        buttonStroke.Color = Color3.fromRGB(0, 80, 0)
        -- Release E key if it's being held
        if isHoldingE then
            VirtualInputManager:SendKeyEvent(false, Enum.KeyCode.E, false, game)
            isHoldingE = false
        end
    end
end)

-- Function to check if near a brainrot
local function isNearBrainrot()
    local character = player.Character
    if not character then return false end
    
    local rootPart = character:FindFirstChild("HumanoidRootPart")
    if not rootPart then return false end
    
    -- Search for brainrot models in workspace
    for _, obj in pairs(workspace:GetDescendants()) do
        if obj:IsA("Model") and obj.Name ~= character.Name then
            -- Check if it's a brainrot (they are usually small models with specific characteristics)
            local primaryPart = obj.PrimaryPart or obj:FindFirstChildWhichIsA("BasePart")
            
            if primaryPart then
                local distance = (primaryPart.Position - rootPart.Position).Magnitude
                
                -- If within pickup range (around 10-15 studs)
                if distance <= 15 then
                    -- Additional check: Make sure it's not the player's own brainrot
                    -- Brainrots in other bases will be further from the player's spawn
                    local isLikelyBrainrot = true
                    
                    -- Check if model has characteristics of a brainrot
                    -- They usually have multiple parts and are relatively small
                    local partCount = 0
                    for _, child in pairs(obj:GetDescendants()) do
                        if child:IsA("BasePart") then
                            partCount = partCount + 1
                        end
                    end
                    
                    if partCount > 0 and partCount < 50 then
                        return true, obj
                    end
                end
            end
        end
    end
    
    return false, nil
end

-- Main auto pickup loop
task.spawn(function()
    while task.wait(0.1) do
        if autoPickupEnabled then
            local nearBrainrot, brainrotModel = isNearBrainrot()
            
            if nearBrainrot then
                -- Hold down E key
                if not isHoldingE then
                    VirtualInputManager:SendKeyEvent(true, Enum.KeyCode.E, false, game)
                    isHoldingE = true
                end
            else
                -- Release E key when not near a brainrot
                if isHoldingE then
                    VirtualInputManager:SendKeyEvent(false, Enum.KeyCode.E, false, game)
                    isHoldingE = false
                end
            end
        else
            -- Make sure E is released if auto pickup is disabled
            if isHoldingE then
                VirtualInputManager:SendKeyEvent(false, Enum.KeyCode.E, false, game)
                isHoldingE = false
            end
        end
    end
end)

-- Cleanup on death
player.CharacterAdded:Connect(function()
    if isHoldingE then
        VirtualInputManager:SendKeyEvent(false, Enum.KeyCode.E, false, game)
        isHoldingE = false
    end
end)

print("âœ… NEXA Auto Pickup loaded!")
print("ðŸ§  Toggle ON and walk near brainrots to auto steal them!")
print("âš¡ The script will automatically hold E for you!")

