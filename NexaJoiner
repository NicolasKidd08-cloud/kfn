-- NEXA JOB MONITOR - HTTP Version
-- Simple display-only script

local HttpService = game:GetService("HttpService")
local Players = game:GetService("Players")

local JOB_DATA_URL = "http://192.168.68.54:8080/jobs"
local CHECK_INTERVAL = 3

print("â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”")
print("âœ… NEXA Loading...")
print("ðŸ“¡ URL: " .. JOB_DATA_URL)
print("â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”")

local player = Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")

wait(1)

-- Remove old GUI
pcall(function()
    if playerGui:FindFirstChild("NexaSimple") then 
        playerGui.NexaSimple:Destroy() 
    end
end)

-- Create GUI
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "NexaSimple"
screenGui.ResetOnSpawn = false
screenGui.Parent = playerGui

-- Main Frame (Draggable)
local mainFrame = Instance.new("Frame")
mainFrame.Name = "MainFrame"
mainFrame.Size = UDim2.new(0, 350, 0, 450)
mainFrame.Position = UDim2.new(0.5, -175, 0.5, -225)
mainFrame.BackgroundColor3 = Color3.fromRGB(15, 20, 25)
mainFrame.BorderSizePixel = 0
mainFrame.Active = true
mainFrame.Draggable = true
mainFrame.Parent = screenGui

-- Make rounded corners
local corner = Instance.new("UICorner")
corner.CornerRadius = UDim.new(0, 12)
corner.Parent = mainFrame

-- Header
local header = Instance.new("Frame")
header.Size = UDim2.new(1, 0, 0, 50)
header.BackgroundColor3 = Color3.fromRGB(0, 217, 255)
header.BorderSizePixel = 0
header.Parent = mainFrame

local headerCorner = Instance.new("UICorner")
headerCorner.CornerRadius = UDim.new(0, 12)
headerCorner.Parent = header

-- Title
local title = Instance.new("TextLabel")
title.Size = UDim2.new(1, -20, 1, 0)
title.Position = UDim2.new(0, 10, 0, 0)
title.BackgroundTransparency = 1
title.Text = "NEXA JOB MONITOR"
title.TextColor3 = Color3.new(1, 1, 1)
title.TextSize = 20
title.Font = Enum.Font.GothamBold
title.TextXAlignment = Enum.TextXAlignment.Left
title.Parent = header

-- Status indicator
local statusDot = Instance.new("TextLabel")
statusDot.Size = UDim2.new(0, 30, 0, 30)
statusDot.Position = UDim2.new(1, -40, 0.5, -15)
statusDot.BackgroundTransparency = 1
statusDot.Text = "â—"
statusDot.TextColor3 = Color3.fromRGB(255, 68, 68)
statusDot.TextSize = 24
statusDot.Font = Enum.Font.GothamBold
statusDot.Parent = header

-- Job list container
local listContainer = Instance.new("ScrollingFrame")
listContainer.Size = UDim2.new(1, -20, 1, -70)
listContainer.Position = UDim2.new(0, 10, 0, 60)
listContainer.BackgroundTransparency = 1
listContainer.BorderSizePixel = 0
listContainer.ScrollBarThickness = 6
listContainer.ScrollBarImageColor3 = Color3.fromRGB(0, 217, 255)
listContainer.CanvasSize = UDim2.new(0, 0, 0, 0)
listContainer.Parent = mainFrame

local listLayout = Instance.new("UIListLayout")
listLayout.SortOrder = Enum.SortOrder.LayoutOrder
listLayout.Padding = UDim.new(0, 8)
listLayout.Parent = listContainer

-- Update canvas size when children change
listLayout:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()
    listContainer.CanvasSize = UDim2.new(0, 0, 0, listLayout.AbsoluteContentSize.Y + 10)
end)

-- Function to create job entry
local function createJobEntry(jobName, money)
    local jobFrame = Instance.new("Frame")
    jobFrame.Size = UDim2.new(1, -10, 0, 60)
    jobFrame.BackgroundColor3 = Color3.fromRGB(26, 31, 38)
    jobFrame.BorderSizePixel = 0
    
    local jobCorner = Instance.new("UICorner")
    jobCorner.CornerRadius = UDim.new(0, 8)
    jobCorner.Parent = jobFrame
    
    local nameLabel = Instance.new("TextLabel")
    nameLabel.Size = UDim2.new(1, -20, 0, 30)
    nameLabel.Position = UDim2.new(0, 10, 0, 5)
    nameLabel.BackgroundTransparency = 1
    nameLabel.Text = jobName
    nameLabel.TextColor3 = Color3.new(1, 1, 1)
    nameLabel.TextSize = 14
    nameLabel.Font = Enum.Font.GothamBold
    nameLabel.TextXAlignment = Enum.TextXAlignment.Left
    nameLabel.TextTruncate = Enum.TextTruncate.AtEnd
    nameLabel.Parent = jobFrame
    
    local moneyLabel = Instance.new("TextLabel")
    moneyLabel.Size = UDim2.new(1, -20, 0, 20)
    moneyLabel.Position = UDim2.new(0, 10, 0, 35)
    moneyLabel.BackgroundTransparency = 1
    moneyLabel.Text = "ðŸ’° " .. money
    moneyLabel.TextColor3 = Color3.fromRGB(0, 255, 136)
    moneyLabel.TextSize = 12
    moneyLabel.Font = Enum.Font.Gotham
    moneyLabel.TextXAlignment = Enum.TextXAlignment.Left
    moneyLabel.Parent = jobFrame
    
    return jobFrame
end

-- Function to update job list
local function updateJobList(jobs)
    -- Clear existing jobs
    for _, child in pairs(listContainer:GetChildren()) do
        if child:IsA("Frame") then
            child:Destroy()
        end
    end
    
    -- Add new jobs
    if jobs and #jobs > 0 then
        for i, job in ipairs(jobs) do
            local jobEntry = createJobEntry(job.name or "Unknown", job.money or "$0")
            jobEntry.LayoutOrder = i
            jobEntry.Parent = listContainer
        end
    else
        local noJobsLabel = Instance.new("TextLabel")
        noJobsLabel.Size = UDim2.new(1, 0, 0, 100)
        noJobsLabel.BackgroundTransparency = 1
        noJobsLabel.Text = "No jobs available"
        noJobsLabel.TextColor3 = Color3.fromRGB(136, 136, 136)
        noJobsLabel.TextSize = 14
        noJobsLabel.Font = Enum.Font.Gotham
        noJobsLabel.Parent = listContainer
    end
end

-- Function to fetch jobs
local function fetchJobs()
    local success, result = pcall(function()
        return HttpService:GetAsync(JOB_DATA_URL, true)
    end)
    
    if success then
        local decodeSuccess, jobs = pcall(function()
            return HttpService:JSONDecode(result)
        end)
        
        if decodeSuccess then
            statusDot.TextColor3 = Color3.fromRGB(0, 255, 136)
            updateJobList(jobs)
            return true
        else
            warn("[Nexa] Failed to decode JSON")
            return false
        end
    else
        warn("[Nexa] Connection failed: " .. tostring(result))
        statusDot.TextColor3 = Color3.fromRGB(255, 68, 68)
        return false
    end
end

-- Main loop
print("âœ… NEXA Ready!")
print("ðŸ”„ Fetching from: " .. JOB_DATA_URL)

while wait(CHECK_INTERVAL) do
    fetchJobs()
end

