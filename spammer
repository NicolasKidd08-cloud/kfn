-- Nexa Spammer - Steal a Brainrot Admin Tool
-- Place this in StarterGui as a LocalScript

local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local LocalPlayer = Players.LocalPlayer

-- Create ScreenGui
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "NexaSpammer"
ScreenGui.ResetOnSpawn = false
ScreenGui.Parent = LocalPlayer:WaitForChild("PlayerGui")

-- Main Frame
local MainFrame = Instance.new("Frame")
MainFrame.Name = "MainFrame"
MainFrame.Size = UDim2.new(0, 350, 0, 400)
MainFrame.Position = UDim2.new(0.5, -175, 0.5, -200)
MainFrame.BackgroundColor3 = Color3.fromRGB(20, 20, 30)
MainFrame.BorderSizePixel = 0
MainFrame.ClipsDescendants = true
MainFrame.Parent = ScreenGui

-- Add UI Corner
local Corner = Instance.new("UICorner")
Corner.CornerRadius = UDim.new(0, 12)
Corner.Parent = MainFrame

-- Add subtle gradient
local Gradient = Instance.new("UIGradient")
Gradient.Color = ColorSequence.new{
	ColorSequenceKeypoint.new(0, Color3.fromRGB(25, 25, 40)),
	ColorSequenceKeypoint.new(1, Color3.fromRGB(15, 15, 25))
}
Gradient.Rotation = 45
Gradient.Parent = MainFrame

-- Title Bar
local TitleBar = Instance.new("Frame")
TitleBar.Name = "TitleBar"
TitleBar.Size = UDim2.new(1, 0, 0, 45)
TitleBar.BackgroundColor3 = Color3.fromRGB(120, 40, 200)
TitleBar.BorderSizePixel = 0
TitleBar.Parent = MainFrame

local TitleCorner = Instance.new("UICorner")
TitleCorner.CornerRadius = UDim.new(0, 12)
TitleCorner.Parent = TitleBar

local TitleGradient = Instance.new("UIGradient")
TitleGradient.Color = ColorSequence.new{
	ColorSequenceKeypoint.new(0, Color3.fromRGB(140, 60, 220)),
	ColorSequenceKeypoint.new(1, Color3.fromRGB(100, 30, 180))
}
TitleGradient.Rotation = 90
TitleGradient.Parent = TitleBar

-- Title Text
local Title = Instance.new("TextLabel")
Title.Name = "Title"
Title.Size = UDim2.new(1, -50, 1, 0)
Title.Position = UDim2.new(0, 15, 0, 0)
Title.BackgroundTransparency = 1
Title.Text = "⚡ NEXA SPAMMER"
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.TextSize = 20
Title.Font = Enum.Font.GothamBold
Title.TextXAlignment = Enum.TextXAlignment.Left
Title.Parent = TitleBar

-- Close/Minimize Button
local CloseButton = Instance.new("TextButton")
CloseButton.Name = "CloseButton"
CloseButton.Size = UDim2.new(0, 35, 0, 35)
CloseButton.Position = UDim2.new(1, -40, 0, 5)
CloseButton.BackgroundColor3 = Color3.fromRGB(220, 50, 80)
CloseButton.Text = "−"
CloseButton.TextColor3 = Color3.fromRGB(255, 255, 255)
CloseButton.TextSize = 22
CloseButton.Font = Enum.Font.GothamBold
CloseButton.Parent = TitleBar

local CloseCorner = Instance.new("UICorner")
CloseCorner.CornerRadius = UDim.new(0, 8)
CloseCorner.Parent = CloseButton

-- Content Frame (everything below title bar)
local ContentFrame = Instance.new("Frame")
ContentFrame.Name = "ContentFrame"
ContentFrame.Size = UDim2.new(1, 0, 1, -45)
ContentFrame.Position = UDim2.new(0, 0, 0, 45)
ContentFrame.BackgroundTransparency = 1
ContentFrame.Parent = MainFrame

-- Toggle buttons frame
local ToggleFrame = Instance.new("Frame")
ToggleFrame.Name = "ToggleFrame"
ToggleFrame.Size = UDim2.new(1, -20, 0, 45)
ToggleFrame.Position = UDim2.new(0, 10, 0, 5)
ToggleFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 45)
ToggleFrame.BorderSizePixel = 0
ToggleFrame.Parent = ContentFrame

local ToggleCorner = Instance.new("UICorner")
ToggleCorner.CornerRadius = UDim.new(0, 8)
ToggleCorner.Parent = ToggleFrame

-- Toggle states
local espEnabled = true
local jailInverseMode = false
local rocketBalloonMode = false

-- Function to create toggle button
local function createToggleButton(name, position, toggleVar)
	local Button = Instance.new("TextButton")
	Button.Name = name
	Button.Size = UDim2.new(0, 75, 0, 30)
	Button.Position = position
	Button.BackgroundColor3 = toggleVar and Color3.fromRGB(70, 180, 130) or Color3.fromRGB(180, 70, 70)
	Button.Text = name
	Button.TextColor3 = Color3.fromRGB(255, 255, 255)
	Button.TextSize = 11
	Button.Font = Enum.Font.GothamBold
	Button.Parent = ToggleFrame
	
	local BtnCorner = Instance.new("UICorner")
	BtnCorner.CornerRadius = UDim.new(0, 6)
	BtnCorner.Parent = Button
	
	return Button
end

local ESPButton = createToggleButton("ESP", UDim2.new(0, 5, 0.5, -15), espEnabled)
local JailButton = createToggleButton("Jail+Inv", UDim2.new(0, 85, 0.5, -15), jailInverseMode)
local RocketButton = createToggleButton("Rkt+Bal", UDim2.new(0, 165, 0.5, -15), rocketBalloonMode)
local CooldownButton = createToggleButton("CD", UDim2.new(0, 245, 0.5, -15), false)

-- Instructions
local Instructions = Instance.new("TextLabel")
Instructions.Size = UDim2.new(1, -30, 0, 30)
Instructions.Position = UDim2.new(0, 15, 0, 55)
Instructions.BackgroundTransparency = 1
Instructions.Text = "Click any player to spam commands!"
Instructions.TextColor3 = Color3.fromRGB(200, 200, 255)
Instructions.TextSize = 12
Instructions.Font = Enum.Font.Gotham
Instructions.TextWrapped = true
Instructions.Parent = ContentFrame

-- Player List Frame
local PlayerListFrame = Instance.new("ScrollingFrame")
PlayerListFrame.Name = "PlayerListFrame"
PlayerListFrame.Size = UDim2.new(1, -30, 1, -100)
PlayerListFrame.Position = UDim2.new(0, 15, 0, 90)
PlayerListFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 45)
PlayerListFrame.BorderSizePixel = 0
PlayerListFrame.ScrollBarThickness = 8
PlayerListFrame.ScrollBarImageColor3 = Color3.fromRGB(120, 40, 200)
PlayerListFrame.CanvasSize = UDim2.new(0, 0, 0, 0)
PlayerListFrame.Parent = ContentFrame

local ListCorner = Instance.new("UICorner")
ListCorner.CornerRadius = UDim.new(0, 10)
ListCorner.Parent = PlayerListFrame

local UIListLayout = Instance.new("UIListLayout")
UIListLayout.SortOrder = Enum.SortOrder.Name
UIListLayout.Padding = UDim.new(0, 8)
UIListLayout.Parent = PlayerListFrame

local UIPadding = Instance.new("UIPadding")
UIPadding.PaddingTop = UDim.new(0, 8)
UIPadding.PaddingBottom = UDim.new(0, 8)
UIPadding.PaddingLeft = UDim.new(0, 8)
UIPadding.PaddingRight = UDim.new(0, 8)
UIPadding.Parent = PlayerListFrame

-- All commands to spam
local commandsList = {
	";rocket",
	";rocket",
	";rocket",
	";jumpscare",
	";balloon",
	";ragdoll",
	";balloon",
	";tiny",
	";jail",
	";inverse",
	";morph",
	";rocket",
	";jumpscare",
	";ragdoll",
	";balloon"
}

-- Cooldown system
local onCooldown = false
local cooldownTime = 3

-- Cooldown display (movable, positioned in corner)
local CooldownDisplay = Instance.new("Frame")
CooldownDisplay.Name = "CooldownDisplay"
CooldownDisplay.Size = UDim2.new(0, 150, 0, 60)
CooldownDisplay.Position = UDim2.new(1, -160, 1, -70)
CooldownDisplay.BackgroundColor3 = Color3.fromRGB(20, 20, 30)
CooldownDisplay.BorderSizePixel = 0
CooldownDisplay.Visible = false
CooldownDisplay.Parent = ScreenGui

local CDCorner = Instance.new("UICorner")
CDCorner.CornerRadius = UDim.new(0, 10)
CDCorner.Parent = CooldownDisplay

local CDGradient = Instance.new("UIGradient")
CDGradient.Color = ColorSequence.new{
	ColorSequenceKeypoint.new(0, Color3.fromRGB(140, 60, 220)),
	ColorSequenceKeypoint.new(1, Color3.fromRGB(100, 30, 180))
}
CDGradient.Rotation = 45
CDGradient.Parent = CooldownDisplay

local CDText = Instance.new("TextLabel")
CDText.Size = UDim2.new(1, -10, 0, 25)
CDText.Position = UDim2.new(0, 5, 0, 5)
CDText.BackgroundTransparency = 1
CDText.Text = "COOLDOWN"
CDText.TextColor3 = Color3.fromRGB(255, 255, 255)
CDText.TextSize = 14
CDText.Font = Enum.Font.GothamBold
CDText.Parent = CooldownDisplay

local CDTimer = Instance.new("TextLabel")
CDTimer.Size = UDim2.new(1, -10, 0, 25)
CDTimer.Position = UDim2.new(0, 5, 0, 30)
CDTimer.BackgroundTransparency = 1
CDTimer.Text = "3.0s"
CDTimer.TextColor3 = Color3.fromRGB(255, 100, 100)
CDTimer.TextSize = 18
CDTimer.Font = Enum.Font.GothamBold
CDTimer.Parent = CooldownDisplay

-- Make cooldown display draggable
local cdDragging = false
local cdDragInput
local cdDragStart
local cdStartPos

CooldownDisplay.InputBegan:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
		cdDragging = true
		cdDragStart = input.Position
		cdStartPos = CooldownDisplay.Position
		
		input.Changed:Connect(function()
			if input.UserInputState == Enum.UserInputState.End then
				cdDragging = false
			end
		end)
	end
end)

CooldownDisplay.InputChanged:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
		cdDragInput = input
	end
end)

game:GetService("UserInputService").InputChanged:Connect(function(input)
	if input == cdDragInput and cdDragging then
		local delta = input.Position - cdDragStart
		CooldownDisplay.Position = UDim2.new(cdStartPos.X.Scale, cdStartPos.X.Offset + delta.X, cdStartPos.Y.Scale, cdStartPos.Y.Offset + delta.Y)
	end
end)

-- Track if minimized
local isMinimized = false

-- ESP for other script users
local function addESP(player)
	if player == LocalPlayer then return end
	
	local function createHighlight(character)
		-- Remove old highlight if exists
		local oldHighlight = character:FindFirstChild("NexaESP")
		if oldHighlight then oldHighlight:Destroy() end
		
		-- Create new highlight
		local highlight = Instance.new("Highlight")
		highlight.Name = "NexaESP"
		highlight.FillColor = Color3.fromRGB(140, 60, 220)
		highlight.OutlineColor = Color3.fromRGB(200, 100, 255)
		highlight.FillTransparency = 0.5
		highlight.OutlineTransparency = 0
		highlight.Parent = character
	end
	
	-- Apply to current character
	if player.Character then
		createHighlight(player.Character)
	end
	
	-- Apply when character respawns
	player.CharacterAdded:Connect(function(character)
		createHighlight(character)
	end)
end

-- Check if player is using the script by looking for the GUI
local function checkForScriptUsers()
	if not espEnabled then return end
	
	for _, player in pairs(Players:GetPlayers()) do
		if player ~= LocalPlayer then
			task.spawn(function()
				-- Check if they have the Nexa Spammer GUI
				local success = pcall(function()
					local theirGui = player:WaitForChild("PlayerGui", 2):FindFirstChild("NexaSpammer")
					if theirGui then
						addESP(player)
					end
				end)
			end)
		end
	end
end

-- Run check periodically
task.spawn(function()
	while true do
		checkForScriptUsers()
		task.wait(5) -- Check every 5 seconds
	end
end)

-- Toggle button functionality
ESPButton.MouseButton1Click:Connect(function()
	espEnabled = not espEnabled
	ESPButton.BackgroundColor3 = espEnabled and Color3.fromRGB(70, 180, 130) or Color3.fromRGB(180, 70, 70)
	
	-- Remove all ESP if disabled
	if not espEnabled then
		for _, player in pairs(Players:GetPlayers()) do
			if player.Character then
				local highlight = player.Character:FindFirstChild("NexaESP")
				if highlight then highlight:Destroy() end
			end
		end
	else
		checkForScriptUsers()
	end
end)

JailButton.MouseButton1Click:Connect(function()
	jailInverseMode = not jailInverseMode
	JailButton.BackgroundColor3 = jailInverseMode and Color3.fromRGB(70, 180, 130) or Color3.fromRGB(180, 70, 70)
	
	-- Disable other mode
	if jailInverseMode then
		rocketBalloonMode = false
		RocketButton.BackgroundColor3 = Color3.fromRGB(180, 70, 70)
	end
end)

RocketButton.MouseButton1Click:Connect(function()
	rocketBalloonMode = not rocketBalloonMode
	RocketButton.BackgroundColor3 = rocketBalloonMode and Color3.fromRGB(70, 180, 130) or Color3.fromRGB(180, 70, 70)
	
	-- Disable other mode
	if rocketBalloonMode then
		jailInverseMode = false
		JailButton.BackgroundColor3 = Color3.fromRGB(180, 70, 70)
	end
end)

CooldownButton.MouseButton1Click:Connect(function()
	local enabled = CooldownButton.BackgroundColor3 == Color3.fromRGB(180, 70, 70)
	CooldownButton.BackgroundColor3 = enabled and Color3.fromRGB(70, 180, 130) or Color3.fromRGB(180, 70, 70)
end)

-- Function to spam all commands on a player
local function spamCommands(playerName)
	-- Check cooldown
	if onCooldown and CooldownButton.BackgroundColor3 == Color3.fromRGB(70, 180, 130) then
		return -- Don't execute if on cooldown and cooldown is enabled
	end
	
	-- Use TextChatService (new chat system) or legacy chat
	local TextChatService = game:GetService("TextChatService")
	local Players = game:GetService("Players")
	
	-- Determine which commands to use based on toggles
	local cmdsToUse = {}
	
	if jailInverseMode then
		-- Only jail and inverse
		cmdsToUse = {";jail", ";inverse", ";jail", ";inverse"}
	elseif rocketBalloonMode then
		-- Only rocket and balloon
		cmdsToUse = {";rocket", ";balloon", ";rocket", ";balloon", ";rocket"}
	else
		-- All commands
		cmdsToUse = commandsList
	end
	
	for i, cmd in ipairs(cmdsToUse) do
		task.spawn(function()
			task.wait((i - 1) * 0.001)
			local fullCommand = cmd .. " " .. playerName
			
			-- Try TextChatService first (new Roblox chat)
			pcall(function()
				local channel = TextChatService.TextChannels:FindFirstChild("RBXGeneral")
				if channel then
					channel:SendAsync(fullCommand)
				end
			end)
			
			-- Try legacy chat method
			pcall(function()
				local args = {
					[1] = fullCommand,
					[2] = "All"
				}
				game:GetService("ReplicatedStorage"):FindFirstChild("DefaultChatSystemChatEvents"):FindFirstChild("SayMessageRequest"):FireServer(unpack(args))
			end)
			
			-- Try direct player chat
			pcall(function()
				Players.LocalPlayer:Chat(fullCommand)
			end)
			
			-- Try game-specific remote (common in custom admin systems)
			pcall(function()
				for _, remote in pairs(game:GetService("ReplicatedStorage"):GetDescendants()) do
					if remote:IsA("RemoteEvent") and (remote.Name:lower():find("chat") or remote.Name:lower():find("command")) then
						remote:FireServer(fullCommand)
					end
				end
			end)
		end)
	end
	
	-- Extra rockets if not in special mode
	if not jailInverseMode and not rocketBalloonMode then
		for i = 1, 5 do
			task.spawn(function()
				task.wait(0.001 * i)
				local rocketCmd = ";rocket " .. playerName
				
				pcall(function()
					local channel = TextChatService.TextChannels:FindFirstChild("RBXGeneral")
					if channel then
						channel:SendAsync(rocketCmd)
					end
				end)
				
				pcall(function()
					Players.LocalPlayer:Chat(rocketCmd)
				end)
			end)
		end
	end
	
	-- Start cooldown if enabled
	if CooldownButton.BackgroundColor3 == Color3.fromRGB(70, 180, 130) then
		onCooldown = true
		CooldownDisplay.Visible = true
		
		local timeLeft = cooldownTime
		while timeLeft > 0 do
			CDTimer.Text = string.format("%.1fs", timeLeft)
			task.wait(0.1)
			timeLeft = timeLeft - 0.1
		end
		
		onCooldown = false
		CooldownDisplay.Visible = false
	end
end

-- Function to create player button
local function createPlayerButton(player)
	if player == LocalPlayer then return end
	
	local PlayerButton = Instance.new("TextButton")
	PlayerButton.Name = player.Name
	PlayerButton.Size = UDim2.new(1, -16, 0, 45)
	PlayerButton.BackgroundColor3 = Color3.fromRGB(50, 50, 70)
	PlayerButton.AutoButtonColor = false
	PlayerButton.Text = ""
	PlayerButton.Parent = PlayerListFrame
	
	local PBCorner = Instance.new("UICorner")
	PBCorner.CornerRadius = UDim.new(0, 8)
	PBCorner.Parent = PlayerButton
	
	-- Player name label
	local NameLabel = Instance.new("TextLabel")
	NameLabel.Size = UDim2.new(1, -50, 1, 0)
	NameLabel.Position = UDim2.new(0, 50, 0, 0)
	NameLabel.BackgroundTransparency = 1
	NameLabel.Text = player.Name
	NameLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
	NameLabel.TextSize = 15
	NameLabel.Font = Enum.Font.GothamBold
	NameLabel.TextXAlignment = Enum.TextXAlignment.Left
	NameLabel.Parent = PlayerButton
	
	-- Player thumbnail
	local Thumbnail = Instance.new("ImageLabel")
	Thumbnail.Size = UDim2.new(0, 35, 0, 35)
	Thumbnail.Position = UDim2.new(0, 5, 0.5, -17.5)
	Thumbnail.BackgroundColor3 = Color3.fromRGB(40, 40, 60)
	Thumbnail.BorderSizePixel = 0
	Thumbnail.Image = Players:GetUserThumbnailAsync(player.UserId, Enum.ThumbnailType.HeadShot, Enum.ThumbnailSize.Size150x150)
	Thumbnail.Parent = PlayerButton
	
	local ThumbCorner = Instance.new("UICorner")
	ThumbCorner.CornerRadius = UDim.new(1, 0)
	ThumbCorner.Parent = Thumbnail
	
	-- Spam icon
	local SpamIcon = Instance.new("TextLabel")
	SpamIcon.Size = UDim2.new(0, 40, 1, 0)
	SpamIcon.Position = UDim2.new(1, -45, 0, 0)
	SpamIcon.BackgroundTransparency = 1
	SpamIcon.Text = "⚡"
	SpamIcon.TextColor3 = Color3.fromRGB(255, 200, 50)
	SpamIcon.TextSize = 20
	SpamIcon.Font = Enum.Font.GothamBold
	SpamIcon.Parent = PlayerButton
	
	-- Hover effect
	local isHovering = false
	
	PlayerButton.MouseEnter:Connect(function()
		isHovering = true
		TweenService:Create(PlayerButton, TweenInfo.new(0.15), {
			BackgroundColor3 = Color3.fromRGB(120, 40, 200)
		}):Play()
	end)
	
	PlayerButton.MouseLeave:Connect(function()
		isHovering = false
		TweenService:Create(PlayerButton, TweenInfo.new(0.15), {
			BackgroundColor3 = Color3.fromRGB(50, 50, 70)
		}):Play()
	end)
	
	-- Click to spam all commands
	PlayerButton.MouseButton1Click:Connect(function()
		spamCommands(player.Name)
	end)
	
	return PlayerButton
end

-- Function to update player list
local function updatePlayerList()
	for _, child in pairs(PlayerListFrame:GetChildren()) do
		if child:IsA("TextButton") then
			child:Destroy()
		end
	end
	
	for _, player in pairs(Players:GetPlayers()) do
		createPlayerButton(player)
	end
	
	PlayerListFrame.CanvasSize = UDim2.new(0, 0, 0, UIListLayout.AbsoluteContentSize.Y + 16)
end

-- Initial player list
updatePlayerList()

-- Update when players join/leave
Players.PlayerAdded:Connect(function(player)
	wait(0.1)
	updatePlayerList()
end)

Players.PlayerRemoving:Connect(function(player)
	updatePlayerList()
end)

-- Update canvas size when layout changes
UIListLayout:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()
	PlayerListFrame.CanvasSize = UDim2.new(0, 0, 0, UIListLayout.AbsoluteContentSize.Y + 16)
end)

-- Minimize/Maximize functionality
CloseButton.MouseButton1Click:Connect(function()
	isMinimized = not isMinimized
	
	if isMinimized then
		-- Minimize
		CloseButton.Text = "+"
		TweenService:Create(MainFrame, TweenInfo.new(0.3, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
			Size = UDim2.new(0, 350, 0, 45)
		}):Play()
		ContentFrame.Visible = false
	else
		-- Maximize
		CloseButton.Text = "−"
		ContentFrame.Visible = true
		TweenService:Create(MainFrame, TweenInfo.new(0.3, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
			Size = UDim2.new(0, 350, 0, 400)
		}):Play()
	end
end)

-- Make draggable
local dragging = false
local dragInput
local dragStart
local startPos

local function update(input)
	local delta = input.Position - dragStart
	MainFrame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
end

TitleBar.InputBegan:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
		dragging = true
		dragStart = input.Position
		startPos = MainFrame.Position
		
		input.Changed:Connect(function()
			if input.UserInputState == Enum.UserInputState.End then
				dragging = false
			end
		end)
	end
end)

TitleBar.InputChanged:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
		dragInput = input
	end
end)

game:GetService("UserInputService").InputChanged:Connect(function(input)
	if input == dragInput and dragging then
		update(input)
	end
end)
